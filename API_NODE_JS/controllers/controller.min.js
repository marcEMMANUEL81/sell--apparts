const Appart=require("../models/modelAppart"),User=require("../models/modelUser"),{v4:uuidv4}=require("uuid");exports.createUser=(req,res,next)=>{delete req.body._id;let user=new User({...req.body});console.log(user);let identifier=uuidv4(),myReq="INSERT INTO user (id_user, user_name, user_phone, user_email, user_password) VALUES( ?, ?, ?, ? , ?)",datas=[identifier,user.nom,user.numero,user.email,user.password];req.getConnection((erreur,connection)=>{erreur?res.status(500).json({message:erreur}):connection.query(myReq,datas,erreur=>{erreur?res.status(400).json({message:erreur}):res.status(201).json({message:"utilisateur crée avec succès !!!"})})})},exports.createAppart=(req,res,next)=>{delete req.body._id;let appart=new Appart({...req.body}),myReq="INSERT INTO apparts (image, titre, type, lieu, prix, vendu, id_proprio) VALUES (?, ?, ?, ?, ?, ?, ?)",datas=[appart.image,appart.titre,appart.type,appart.lieu,appart.prix,appart.vendu,appart.id_proprio];req.getConnection((erreur,connection)=>{erreur?console.log(erreur):connection.query(myReq,datas,erreur=>{erreur?console.log(erreur):res.status(201).json({message:"bien immobilié ajouté"})})})},exports.deleteAppart=(req,res,next)=>{let myReq="DELETE FROM apparts WHERE id_appart = "+req.params.id;req.getConnection((erreur,connection)=>{erreur?console.log(erreur):connection.query(myReq,(erreur,resultat)=>{erreur?console.log({message:"impossible de supprimer le bien",error:erreur}):res.status(201).json({message:"bien immobilié supprimé"})})})},exports.userConnexion=(req,res,next)=>{let user,myReq="SELECT * FROM user WHERE user_email = ?",datas=[{userEmail:req.body.email,userPassword:req.body.password}.userEmail];req.getConnection((erreur,connection)=>{})};